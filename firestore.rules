rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Regla para datos de usuario (Privado)
    match /usuarios/{userId}/{document=**} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Regla para Caché Global de Fotos (Público para usuarios logueados)
    // Permite leer las fotos existentes y crear nuevas si no existen
    match /paises_info/{paisCode} {
      allow read, write: if request.auth != null;
    }
  }
}